buildscript {
    repositories {
        mavenLocal()
        mavenCentral()
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath 'com.gradle.publish:plugin-publish-plugin:1.0.0'
        classpath 'pl.allegro.tech.build:axion-release-plugin:1.13.6'
        classpath 'com.fizzpod:gradle-extended-info-plugin:11.2.0'
        classpath 'com.fizzpod:gradle-gitignore-plugin:2.3.1'
        classpath 'com.fizzpod:gradle-layout-plugin:4.3.0'
        classpath 'com.fizzpod:gradle-sweeney-plugin:4.5.0'
        classpath 'com.github.ben-manes:gradle-versions-plugin:0.41.0'
        classpath 'com.gradle.enterprise:com.gradle.enterprise.gradle.plugin:3.8.1'
        classpath 'org.owasp:dependency-check-gradle:6.5.3'
        constraints {
/*            implementation('org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.6.10') {
                because 'version 1.3.5 as defined by nebula gradle-info-plugin has a known vulnerability'
            }
            implementation('org.bouncycastle:bcpg-jdk15on') {
                because 'version 1.64 as defined by nebula gradle-info-plugin has a known vulnerability'
                version {
                    require '1.70'
                }
            }
            implementation('org.eclipse.jgit:org.eclipse.jgit') {
                because 'version 1.64 as defined by nebula gradle-info-plugin has a known vulnerability'
                version {
                    require '5.13.0.202109080827-r'
                }
            }*/

            classpath('com.thoughtworks.xstream:xstream:1.4.18') {
                because 'version 1.4.17 defined by ben manes gradle version plugin has known vulnerabilities'
                version {
                    require '1.4.18'
                }
            }
            classpath('com.h2database:h2') {
                because 'version 1.4 defined by owasp plugin has known vulnerabilities'
                version {
                    require '1.4.2'
                }
            }

        }
    }
}
//apply plugin: 'com.gradle.enterprise'
apply plugin: 'java'

apply from: './src/main/resources/META-INF/pater-build/com-fizzpod-opinion-gradle-plugin.gradle'
apply from: './src/main/resources/META-INF/pater-build/com-fizzpod-opinion-gradle-plugin-jacoco.gradle'
apply from: './src/main/resources/META-INF/pater-build/com-fizzpod-opinion-gradle-plugin-init.gradle'
apply from: './src/main/resources/META-INF/pater-build/com-fizzpod-opinion-gradle-plugin-publish.gradle'

dependencies {
    runtimeOnly 'com.gradle.publish:plugin-publish-plugin:1.0.0'
    runtimeOnly 'pl.allegro.tech.build:axion-release-plugin:1.13.6'
    runtimeOnly 'com.fizzpod:gradle-extended-info-plugin:11.2.0'
    runtimeOnly 'com.fizzpod:gradle-gitignore-plugin:2.3.1'
    runtimeOnly 'com.fizzpod:gradle-layout-plugin:4.3.0'
    runtimeOnly 'com.fizzpod:gradle-sweeney-plugin:4.5.0'
    runtimeOnly 'com.fizzpod:gradle-pater-build-plugin:2.4.0'
    runtimeOnly 'com.github.ben-manes:gradle-versions-plugin:0.41.0'
    runtimeOnly 'com.gradle.enterprise:com.gradle.enterprise.gradle.plugin:3.8.1'
    runtimeOnly 'org.owasp:dependency-check-gradle:6.5.3'
    //Following constraints to avoid CVE Vulns
    constraints {
/*        implementation('org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.6.10') {
            because 'version 1.3.5 as defined by nebula gradle-info-plugin has a known vulnerability'
        }
        implementation('org.bouncycastle:bcpg-jdk15on') {
            because 'version 1.64 as defined by nebula gradle-info-plugin has a known vulnerability'
            version {
                require '1.70'
            }
        }
        implementation('org.eclipse.jgit:org.eclipse.jgit') {
            because 'version 1.64 as defined by nebula gradle-info-plugin has a known vulnerability'
            version {
                require '5.13.0.202109080827-r'
            }
        }*/

        implementation('com.thoughtworks.xstream:xstream:1.4.18') {
            because 'version 1.4.17 defined by ben manes gradle version plugin has known vulnerabilities'
            version {
                require '1.4.18'
            }
        }
        implementation('com.h2database:h2') {
            because 'version 1.4 defined by owasp plugin has known vulnerabilities'
            version {
                require '1.4.200'
            }
        }

    }
}
